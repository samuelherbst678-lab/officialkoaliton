<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Koalitionsrechner – Halbkreis</title>
  <style>
    body {
      margin: 0;
      padding: 32px;
      background: #0b0f14;
      color: #fff;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
    }
    svg {
      display: block;
      margin: auto;
      background: transparent;
    }
  </style>
</head>
<body>
  <svg id="chart" width="900" height="620" viewBox="0 0 900 620"></svg>

  <script>
    function drawHalfRing(svg, data, totalSeats){
      svg.innerHTML = "";
      const w = 900, h = 620;                // ViewBox
      const cx = w / 2, cy = h * 0.92;       // Halbkreis nach unten verschoben
      const rOuter = 300;                    // äußerer Radius
      const ringWidth = 220;                 // Dicke des Rings
      const rInner = rOuter - ringWidth;     // innerer Radius

      let total = data.reduce((a,b)=>a+(b.seats||0),0);
      if(total===0) total = totalSeats;
      let start = Math.PI;

      const g = document.createElementNS("http://www.w3.org/2000/svg","g");
      svg.appendChild(g);

      function arcPath(cx, cy, r1, r2, a0, a1){
        const large = (a1-a0) > Math.PI ? 1 : 0;
        const x0 = cx + r1 * Math.cos(a0), y0 = cy + r1 * Math.sin(a0);
        const x1 = cx + r1 * Math.cos(a1), y1 = cy + r1 * Math.sin(a1);
        const x2 = cx + r2 * Math.cos(a1), y2 = cy + r2 * Math.sin(a1);
        const x3 = cx + r2 * Math.cos(a0), y3 = cy + r2 * Math.sin(a0);
        return `M${x0},${y0} A${r1},${r1} 0 ${large},1 ${x1},${y1} L${x2},${y2} A${r2},${r2} 0 ${large},0 ${x3},${y3}Z`;
      }

      for(const p of data){
        const share = (p.seats||0)/total;
        const angle = share * Math.PI;
        const path = document.createElementNS("http://www.w3.org/2000/svg","path");
        path.setAttribute("d", arcPath(cx, cy, rOuter, rInner, start, start+angle));
        path.setAttribute("fill", p.color||"#ccc");
        g.appendChild(path);
        start += angle;
      }
    }

    // Beispiel-Daten
    const data = [
      {party:"CDU/CSU", seats:184, color:"#000"},
      {party:"SPD", seats:112, color:"#e3000f"},
      {party:"Grüne", seats:79, color:"#64a12d"},
      {party:"FDP", seats:39, color:"#ffed00"},
      {party:"AfD", seats:131, color:"#009ee0"},
      {party:"Linke", seats:39, color:"#be3075"},
      {party:"BSW", seats:46, color:"#ff8700"}
    ];

    const svg = document.getElementById("chart");
    drawHalfRing(svg, data, 630);
  </script>
</body>
</html>
