<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Koalitionsrechner</title>
  <style>
    body {
      margin: 0;
      padding: 32px;
      font-family: sans-serif;
      background: #0b0f14;
      color: #fff;
    }
    .wrap {
      display: grid;
      gap: 16px;
    }
    .card {
      background: #121823;
      padding: 16px;
      border-radius: 8px;
    }
    svg {
      width: 100%;
      height: auto;
      display: block;
    }
  </style>
</head>
<body>
  <h1>Koalitionsrechner</h1>
  <div class="card">
    <svg id="chart"></svg>
  </div>

  <script>
    function drawHalfRing(svgId, data) {
      const svg = document.getElementById(svgId);
      svg.innerHTML = "";

      // Breite & Höhe
      const w = 900, h = 600;
      svg.setAttribute("viewBox", `0 0 ${w} ${h}`);
      svg.setAttribute("preserveAspectRatio", "xMidYMin meet");

      // Mittelpunkt & Radien
      const cx = w / 2, cy = h * 0.95; // Halbkreis nach unten geschoben
      const rOuter = 320;              // äußerer Radius (Größe)
      const rInner = 100;              // innerer Radius (Loch in der Mitte)
      const ringWidth = rOuter - rInner;

      // Summierung der Sitze
      let total = data.reduce((a, b) => a + (b.seats || 0), 0);
      if (total === 0) return;
      let start = Math.PI;

      // Gruppe für Bögen
      const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
      svg.appendChild(g);

      function arcPath(cx, cy, r1, r2, a0, a1) {
        const large = (a1 - a0) > Math.PI ? 1 : 0;
        const x0 = cx + r1 * Math.cos(a0), y0 = cy + r1 * Math.sin(a0);
        const x1 = cx + r1 * Math.cos(a1), y1 = cy + r1 * Math.sin(a1);
        const x2 = cx + r2 * Math.cos(a1), y2 = cy + r2 * Math.sin(a1);
        const x3 = cx + r2 * Math.cos(a0), y3 = cy + r2 * Math.sin(a0);
        return `M${x0},${y0} A${r1},${r1} 0 ${large} 1 ${x1},${y1}
                L${x2},${y2} A${r2},${r2} 0 ${large} 0 ${x3},${y3}Z`;
      }

      // Bögen zeichnen
      data.forEach(d => {
        const angle = (d.seats / total) * Math.PI;
        const end = start + angle;
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("d", arcPath(cx, cy, rOuter, rInner, start, end));
        path.setAttribute("fill", d.color);
        g.appendChild(path);
        start = end;
      });
    }

    // Beispiel-Daten
    const data = [
      { party: "CDU/CSU", seats: 184, color: "black" },
      { party: "SPD", seats: 112, color: "red" },
      { party: "Grüne", seats: 79, color: "green" },
      { party: "FDP", seats: 39, color: "yellow" },
      { party: "AfD", seats: 131, color: "blue" },
      { party: "Linke", seats: 39, color: "purple" },
      { party: "BSW", seats: 46, color: "orange" }
    ];

    drawHalfRing("chart", data);
  </script>
</body>
</html>
